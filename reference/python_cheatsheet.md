# Python 簡易レファレンス

## 基本事項

| 重要度 | 事項 | 書き方 | 
| --- | --- | --- |
| ■■■■ | 文の区切り | 改行 | 
| ■■  | 複数文のブロック化 | インデント | 
| ■■ | １行コメント |  行頭に # | 
| | 複数行コメント | ３つの引用符"""で挟む|
| ■■■ | 直前の出力 | `_` (下線)|
| ■■■ | 代入 | `x = 1`|
| ■■■ |等号  | `x == 1` |

## 変数
| 重要度 | 事項 | 書き方 |  |
| --- | --- | --- | --- | 
| ■■ | 代入記法 | `x += 5` |  `x = x+ 5`|
| ■■ | 一般 | `x @= 5` |  `x = x @ 5`|
| ■■ | 複数代入 | `x,y,z=y,z,x` |   |

## データ型
| 重要度 | 事項 | リテラル | 値 |
| --- | --- | --- | --- | 
|   |  整数十進法表記：そのまま | `123`  | $123$
|   |  整数二進数表記: `0b`を冒頭につける | `0b101`  | $5$
|   | １６進数表記: `0x`を冒頭につける | `0xab`  | $10\times 16+11=171$ |
|   | 実数  | `12.23`, `.23` | $12.23$, $0.23$ |
| ◼️  | 浮動小数点表示  | `3.45e5` | $3.45\times 10^5$ | 

## 文字列
| 重要度 |  | 書き方                |  備考  |
| ---    | ---                    | --- | --- | 
|        | 表示 | １重引用符で囲む | 
|        |     | ２重引用符で囲む | 
|        |     | ３重引用符で囲む | 改行も使える  | 
|   ■■■   | 連結 | `'123' + 'abc'` | `=> '123abc'` | 
|   ■■   | 区切り記号をつけて連結 | `":".join(['123','abc','34'])` | `=> '123:abc:34'` | 
|   | 空文字列 |   "" | | 


## エスケープシークエンス
| 重要度 | 説明         | 書き方   | 
| ---    | ---            | ---  |
| ■■       | 改行           | `\n` |
| ■       | 引用符         | `\"` | 
|        | 引用符         | `\'` |  
| ■       | タブ           | `\t` |
| ■     | バッククオート | `\\` | 

## オブジェクトの変換
| 重要度 | 説明         | 例   | 結果 |  
| ---    | ---            | ---  | --- |
| ■■■     | 実数へ | `float(1/3)` | $0.3333333333333$ |
| ■■■    | 十進法として整数へ | `int("0123")`   | $123$ |
| ■    | p進法として整数へ | `int("111",2)`   | $7$ |
| ■■    | 実数から整数へ | `int(12.3)`   | $12$ |
| ■■■  | オブジェクトから文字列 | `str(13)` | `'13'` |
| ■■  |  | `str( 3.141752e2)` | `'3141.752'` |
| ■■■  | 文字列を区切り記号で分割 | `"2-ab-34".split("-")` | `['2','ab','34']`|


## print
| 重要度 | 内容                         | 例                                            |
| ---    | ---                          | ---                                           |
| ■■   | データ xを出力               | `print(x)`                                |
| ■■   | データx,y,zを空白区切で出力 | `print(x,y,z)`                       |
| ■■   | 区切り文字の指定 | `print(x,y,z,sep=",")`                       |
| ■     | データ x を出力し改行しない  | `print(x,end="")`                             |
## format 文字列への複雑な変換
| 重要度 | 内容               | 書き方    | 例                                            | 結果 |
| ---    | ---               | ----     | ---                                           | --- |
| ■■■   | フォーマット方式     | `{}`     | `"{}+{}={}".format(2,3,2+3)`      | `'2+3=5'` |
| ■■  | ２番目の変数を指定     |  `{1}`   | `"{0}+{0}={1}".format(5,5+5)` | `'5+5=10'`|
| ■■   | ５桁確保  | `{:5}`|  `"{:5}".format(111)` | 数は右寄せ`'  111'`となる  |
| ■■   |   | |  `"{:5}".format('abc')` |  文字列は左寄せ`'abc  '` となる |
| ■■   |   | |  `"{:>5}".format('abc')` |  右寄せ`'  abc'` となる |
| ■■■  | 実数の小数点以下5桁を表示| `{:.5f}`          | `"1/7={:.5f}".format(1./7)` |  `'1/7=0.14286'`|
| ■■■  | 7桁をとり小数点以下5桁を表示   |`{:7.5f}`  | `"22/7={:10.5f}".format(22./7)` | `'22/7=   3.14286'`|

## 入力
| | 動作  | 例 |
| ---| --- | --- |
| ■ | 入力した結果を変数xに代入|  `x=input("あなたの年齢は?)` |
| ■■  | 整数を入力し変数xに代入 | `x=int(input("整数 x= "))` |
| ■■  | 実数を入力し変数xに代入 | `x=float(input("実数xを入力してください"))` |


## 演算子

| 演算 | 書き方 |  演算 | 書き方 | 
| --- | --- | --- | --- | 
| 和 |  `x + y` |  xにdを加える|`x += d` |
| 積 |`x * y` | xにdをかける|`x *= d` |
| 差 |`x - y` |xからdをひく|`x -= d` |
| 商 |`x / y` | 余り | `x % y` |


## リスト・イテレータ・タプル

| 重要度 | 説明 | 例 |  結果 | 
| --- | --- | --- | --- | 
| ▪️▪️| リスト | `x=[0,1,2,3,4,5]` | 
| ▪️▪️▪️️| リストの内包的記述 | `x=[i**2 for i in range(5)]` | `=> [0,1,4,9,16]`  |
| ▪️▪️ | 要素数 |  `len(x)` | 
| ▪️▪️ | $5$番目の成分  |  `x[4]` |
| ▪️▪️| 最後から$3$番目の成分| `x[-3]` |
| | $2$番目以降$5$番目より前の$3$個 | `x[2:4]` | `=> [2,3]`|
| ▪️▪️▪️ | 要素判定 | `u in x`|
| ▪️▪️ | 反復子  | `range(5)` |  `0,1,2,3,4`を動く |
| ▪️   | |   `range(3,7)` |  `3,4,5,6`を動く |
| ▪️   | |  `range(1,12,3)` |  `1,4,7,10` を動く |
| |  要素の出現回数 |  `[1,2,1,2,1].count(1)` | $3$ |

## リストの基本
| 重要度 | 説明 | 例 |  結果 | 
| --- | --- | --- | --- | 
| | 要素変更 | `x[1]=8` |   =>  `x=[0,8,2,3,4,5]` |
| ▪️▪️ | 要素追加 | `x.append(10)` |  `x=[0,8,2,3,4,5,10]` |
| ▪️▪️ | 要素追加 | `x+ [12]` |  `x=[0,8,2,3,4,5,10,12]` |
| | 最初の出現を除く | `remove(8)` | `x=[0,2,3,4,5,10,12]` |
| | 最後の要素を削除(py) |  `x.pop()` |  `x=[0,2,3,4,5,10]` |
| | リストを逆順にする | `x.reverse()` | `x=[10,5,4,3,2,0]` | 
| ▪️ | リストを整列 | `x.sort()` | `=> x=[0,2,3,4,5,10]` |
| ▪️▪️| 整列したものを返す | `sorted(x)` | `=>[0,2,3,4,5,10]`, x は変わらない|
| | リストを逆に生成する反復子 | `reversed(x)` | `10,5,4,3,2,0` の順に生成する | 
| | 複数リストの対応箇所を合併 | `zip([1,2,3],[2,4,10])` | `=>[(1,2),(2,3),(3,10)]` |
| ▪️▪️| リストを結合(py) | `x1+x2` | `[1,2]+[2,3,5]=[1,2,2,4,5]` |
| ▪️▪️| 重複排除 | `list(set([1,2,1,1,2]))` | `[1,2]` |

## リストの高階操作
 | 重要度 | 説明&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 例 |  結果 | 
| --- | --- | --- | --- | 
| ▪️▪️▪️ | 各要素を操作　| `[(i,i**2) for i in range(4)]` |`[(0,0),(1,1),(2,4),(3,9)]` |
| ️ | 　| `map(lambda x:x**2,range(4))` | 0,1,4,9 を生成する反復子 |
| ▪️▪️▪️ |  条件を満たす要素  | `[i for i in range(30) if i%7==0` | `[0,7,14,21,28]` |
| ️ |    | `filter(lambda x:x%7==0,range(30))` | 0,7,14,21,28 を生成する反復子 |
|  ▪️   | 入れ子リスト | `[[(i,j) for i in [0,1]] for j in [2,3]` | `[[(0, 2), (1, 2)], 
[(0, 3), (1, 3)]]`|
|  ️   | 二変数の場合 | `[(i,j) for i in [0,1] for j in [2,3]` | `[(0,2),(0,3),(1,2),(1,3)]`|
|   ️  | 対のリストの場合 | `[(i,j) for [i,j] in [[1,1],[1,2]]]`| `[(1,1),(1,2)]` |
|   ️  | ２リストから対を作る | `[(i,j) for (i,j) in zip([1,2],[5,6])]` |`[(1,5),(2,6)]`  |

## 集合
| 重要度 | 説明 | 例 |  注 |
| --- | --- | --- | --- |
|▪️ | 外延記法 | `set([1,5,3,5,7,1,3])`| `=>{1,3,5,7}`
|▪️▪️ | 内包記法 | `set(i for i in range(10) if i%2==0)` | `=> {0,2,4,6,8}`
| | 集合xからリストへ | `list({1,2,4})`| `=>[1,2,4]`
| | 個数 | `len(x)` |
|▪️▪️ | 合併、交わり、差 | `x.union(y)`, `x.intersection(y), `x.difference(y)`|

## 辞書(Hash)
| 重要度 | 説明 | 例 |  注 |
| --- | --- | --- | --- |
|  | 生成 |  x={'a':['a','b'],'b':3, 1:'a'}|
|  | リストから生成 | `x=dic([('a',['a','b']),('b',3),(1,'a')])|` |
|  | 値 |  `x['a']` |  `=> ['a','b3']`|
|  | キーの存在 |  `'a' in x, 'a' not in x`|
| | キーのリスト |  `list(x.keys())` | `=>['a','b',1]`|
| | 値のリスト | `list(x.values())` |  `=>`[['a','b'],3,'a']`|


## 条件分岐
+  ■■ P真ならQを実行
~~~python
         if P:
            Q 
~~~

+ ■■ PのときQ、そうでないときR     
~~~python
        if P:
        	Q
        else:
        	R
~~~

+ ■ P1が真ならQ1を, P2が真ならQ2を,それ以外の時Q3を実行
~~~python
        if P1:
            Q1
        elif P2:
            Q2
        else:
            Q3
~~~

## 条件の書き方
| 重要度 | 通常の書き方 | python での書き方 |
| --- | --- | --- | 
| ■■■ | $x=y$ | `x == y` |
| ■■■ | $x\neq y$ | `x != y` |
| ■■ | $x> y$ | `x > y` |
| ■■ | $x\geq y$ | `x >= y` |
| ■■ | $x< y$ | `x < y` |
| ■■ | $x\leq y$ | `x <= y` |
| ■■■ | Pではない  | not (P) |
| ■■■ | PかつQ |  (P) and (Q) |
| ■■■ | PまたはQ  | (P) or (Q) |

+ 注意：P,Qに論理記号がなければP,Qの括弧は不要

## 繰り返し
+ ■■■ Pが正しい限り Q1,Q2を実行
~~~python
        while x>0:
            print(x)
            x+=-1
~~~

+ ■■■ リスト xlist の要素毎に Q1,Q2を実行. 
~~~python
        for x in [1,2,4,5]:
           print(x)        	
~~~

+ ■ リスト xlist の添え字と要素の情報を得て Q1,Q2を実行. 
~~~python
        for i,x in enumerate([1,2,4,5]):
           print(i,":",x)        	
~~~

+ ループからの脱出 `break`
~~~python
		for x in range(100):
			if 2**x>1000:
				print(x)
				break
~~~


## 関数定義
+ 関数の定義
~~~python
		def beki(x,p):
			z=1
			for i in range(p):
				z*=x
			return z
~~~
+ 実行例
~~~python
		beki(10,2) => 100        beki(2,2)  => 4
		beki(10,5) => 100000	 beki(4,3)  => 64
~~~

## 関数定義(キーワード引数)
+ 関数の定義
~~~python
		def beki2(x=10,p=2):
			z=1
			for i in range(p):
			    z*=x
			return z
~~~
+ 実行例:
~~~python
		beki2()  => 100		     beki2(x=2) => 4
		beki2(p=5) => 100000     beki2(x=4,p=3) => 64
		beki2(p=3,x=4) => 64
~~~

## ライブラリーの利用
| 内容 | 書き方 | 例 |
| --- |   --- |   --- |
| 呼び出し | `import モジュール名` | `import calendar`|
|  |  | (複数） `import calendar,math`	|
| 呼び出したモジュールの関数利用法| モジュール名.関数名 | `math.sqrt(16)` |
| 使うクラスの明示的呼び出し | `from モジュール名 import 関数名` | ` from math import sqrt`|
| 明示的呼び出し関数の利用 | `関数名`だけで良い | `sqrt(16)` |
| モジュール内の関数をすべて読み込む |  `from モジュール名 import *` | ` from math import *` |
| | リスク：自分で定義した関数と同じ名前の関数があると上書きされる|
 
## math ライブラリーの関数
| 説明            | 通常記法   | math モジュール関数名  | 例 |
| ---           | ---        | ---  | --- |
| 絶対値         | $｜x｜$           | `abs(x)` |
| 平方根         | $\sqrt{x}$ | `sqrt(x)`                   |
| べき                     | $x^y$   | `pow(x,y)` |   |
|                         | $e^x$   | `exp(x)` |
| 自然対数                     | $\log(x)$  | `log(x)`  |
| 三角関数     | | `sin(x)`, `cos(x)`,`tan(x)`    |
| 逆三角関数                   |            | `asin(x)`, `acos(x)`,`atan(x)` |
| 角度をラディアンへ           |            | `radian(x)`                    |
| ラディアンを角度へ           |            | `degrees(x)`                   | `degree(math.pi)=180.0`  |
| 実数の整数部分（ガウス記号） | $[x]$      | `floor(x)`                     |                          |

## random ライブラリー

| 説明 | 関数名 |
| -- | -- |
| 呼び出し | `from random import *`
| 0 以上 b未満のランダムな整数 |  `randrange(b)` |
| a 以上 b以下のランダムな整数 |  `randint(a,b)` |
| リスト `xlist`のランダムな要素 |  `choice(xlist)` |
| リスト `xlist` からkosuu個の要素を（重複を許して取り出す) |  `choices(xlist, k=kosuu)` |
| リスト　`xlist` から kosuu個の異なる要素を取り出す |  `sample(xlist, kosuu)` |
| `xlist` の順序をランダムに入れ替える（返り値はない） |  `shuffle(xlist)` |
|  単位区間[0,1]のランダムな実数 |  `random()` |

## 例外処理
+ `try`の後にエラーが生じる可能性がある処理をかき、
   `except`のところに、エラーが生じたときの処理を書く.
~~~python
        try:
            x=10/y
        except:
            print("ゼロでは割れません")
~~~

+ エラーが生じなかった時のことを `else`の後に書く
~~~python
        try:
            x=10/y
        except:
            print("ゼロでは割れません")
        else:
            print("10/{}={}".format(y,x))
~~~


